

<div ng-controller="StatsController" class="col-md-12">
    <div class="col-md-12">
        <h2>Statistiques</h2>

        <strong>Parties gagnées :</strong> {{currentUser.won_game}}<br>
        <strong>Parties perdues :</strong> {{currentUser.lost_game}}<br>
        <strong>Exaequo :</strong> {{currentUser.exaequo}}<br>
        <strong>Nombre de parties totales :</strong> {{currentUser.won_game + currentUser.lost_game + currentUser.exaequo}}<br>
        <strong>Nombre de parties entraînement :</strong> {{countTrainings}}<br>
        <!--<strong>Nombre d'adversaires rencontrés :</strong>  {{countOpponents}}<br>-->
        <strong>Nombre d'adversaires qui vous attendent :</strong>  {{waitingYou}}<br>
        <strong>Nombre d'adversaires que vous attendez :</strong>  {{waitingOther}}<br>
        <div class="col-md-3">
            <canvas id="winLoseExChart" width="400" height="400"></canvas>
        </div>

        <div class="col-md-3 col-md-offset-1">
            <canvas id="gameChart" width="400" height="400"></canvas>
        </div>

        <div class="col-md-3 col-md-offset-1">
            <canvas id="waitChart" width="400" height="400"></canvas>
        </div>
    </div>

    <script>
        Chart.defaults.global.responsive = true; // TODO désactiver les tooltips

        // Chart des parties gagnées / perdues / exaequo
        var ctx_wle  = $("#winLoseExChart").get(0).getContext("2d");

        var data_wle = [
            {
                value:9,
                color:"rgba(138,30,62,1)",
                highlight:"rgba(138,30,62,0.75)",
                label:"Victoires"
            },
            {
                value:1,
                color:"rgba(193,54,69,1)",
                highlight:"rgba(193,54,69,0.75)",
                label:"Défaites"
            },
            {
                value:5,
                color:"rgba(214,92,79,1)",
                highlight:"rgba(214,92,79,0.75)",
                label:"Exaequo"
            }
        ];

        var winLoseExChart = new Chart(ctx_wle).Doughnut(data_wle, {
            scaleBeginAtZero : true
        });

        // Chart des parties jouées / entrainement

        var ctx_game  = $("#gameChart").get(0).getContext("2d");
        var data_game = [
            {
                value:15,
                color:"rgba(138,30,62,1)",
                highlight:"rgba(138,30,62,0.75)",
                label:"Nombre de parties"
            },
            {
                value:31,
                color:"rgba(214,92,79,1)",
                highlight:"rgba(214,92,79,0.75)",
                label:"Nombre d'entrainements"
            }
        ];
        var gameChart = new Chart(ctx_game).Pie(data_game, {
            scaleBeginAtZero : true
        });

        // Chart des joueurs en attente

        var ctx_wait  = $("#waitChart").get(0).getContext("2d");

        var data_wait = {
            labels: ["Vous attendent", "Vous attendez"],
            datasets: [
                {
                    label: "My First dataset",
                    fillColor: "rgba(193,54,69,1)",
                    strokeColor: "rgba(220,220,220,0.8)",
                    highlightFill: "rgba(193,54,69, 0.75)",
                    highlightStroke: "rgba(220,220,220,1)",
                    data: [0, 3]
                }
            ]
        };

        var waitChart = new Chart(ctx_wait).Bar(data_wait, {
            scaleBeginAtZero : true
        });
    </script>


</div>